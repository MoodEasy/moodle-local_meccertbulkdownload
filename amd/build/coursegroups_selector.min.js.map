{"version":3,"file":"coursegroups_selector.min.js","sources":["../src/coursegroups_selector.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript module for loading the groups of the selected course.\n *\n * @module     local_meccertbulkdownload/coursegroups_selector\n * @author     MoodEasy.com\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nvar course = document.getElementById(\"id_corso\");\n\nexport const init = () => {\n    course.addEventListener('change', () => {\n        getGroups();\n    });\n};\n\nconst getGroups = () => {\n    var courseid = course.value;\n    $(\"#id_gruppocorso\").hide();\n    $(\"#cs-loader-1\").css('display', 'inline-block');\n    $(\"#id_gruppocorso\").empty();\n    $.ajax({\n        url: \"coursegroups.php\",\n        type: \"GET\",\n        dataType: \"json\",\n        data: \"cid=\" + courseid,\n        success: function (response) {\n            var groups = response;\n            setAllText();\n            $.each(groups, function(index, group) {\n                $(\"#id_gruppocorso\").append($('<option>').val(group.id).text(group.name));\n            });\n        },\n        error: function () {\n            $(\"#id_gruppocorso\").append($('<option>').val('error').text('ERROR'));\n        },\n        complete: function () {\n            $(\"#cs-loader-1\").css('display', 'none');\n            $(\"#id_gruppocorso\").show();\n        }\n    });\n};\n\nconst setAllText = () => {\n    $(\"#id_gruppocorso\").append($('<option>').val('no').text(window.alltxt));\n};\n"],"names":["course","document","getElementById","addEventListener","getGroups","courseid","value","hide","css","empty","ajax","url","type","dataType","data","success","response","groups","setAllText","each","index","group","append","val","id","text","name","error","complete","show","window","alltxt"],"mappings":";;;;;;;8IAyBIA,OAASC,SAASC,eAAe,0BAEjB,KAChBF,OAAOG,iBAAiB,UAAU,KAC9BC,sBAIFA,UAAY,SACVC,SAAWL,OAAOM,0BACpB,mBAAmBC,2BACnB,gBAAgBC,IAAI,UAAW,oCAC/B,mBAAmBC,wBACnBC,KAAK,CACHC,IAAK,mBACLC,KAAM,MACNC,SAAU,OACVC,KAAM,OAAST,SACfU,QAAS,SAAUC,cACXC,OAASD,SACbE,6BACEC,KAAKF,QAAQ,SAASG,MAAOC,2BACzB,mBAAmBC,QAAO,mBAAE,YAAYC,IAAIF,MAAMG,IAAIC,KAAKJ,MAAMK,WAG3EC,MAAO,+BACD,mBAAmBL,QAAO,mBAAE,YAAYC,IAAI,SAASE,KAAK,WAEhEG,SAAU,+BACJ,gBAAgBpB,IAAI,UAAW,4BAC/B,mBAAmBqB,WAK3BX,WAAa,yBACb,mBAAmBI,QAAO,mBAAE,YAAYC,IAAI,MAAME,KAAKK,OAAOC"}